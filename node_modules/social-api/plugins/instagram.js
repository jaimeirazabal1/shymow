/* Misc */
var toolset 		= require('toolset');
var _ 				= require('underscore');
var qs				= require('querystring');
var instagramApi	= require('instagram');

var instagram = function(options, callback) {
	var scope = this;
	
	// Parameters
	this.options 	= _.extend({
		clientId:		'',
		clientSecret:	''
	},options);
	
	this.instance 	= instagramApi.createClient(this.options.clientId, this.options.clientSecret);
	
	callback(this);
}
instagram.prototype.recent = function(callback) {
	this.instance.fetch('/v1/users/self/media/recent', {
		access_token: 	this.options.token,
		count: 			500
	}, function(images, error, pagination) {
		if (error) {
			callback(false);
		} else {
			callback(images);
		}
	});
}


module.exports = instagram;