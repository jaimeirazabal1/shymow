/* Misc */
var toolset 		= require('toolset');
var _ 				= require('underscore');
var qs				= require('querystring');
var githubApi		= require('github-api');

var github = function(options, callback) {
	var scope = this;
	
	// Parameters
	this.options 	= _.extend({
		token:		''
	},options);
	
	this.instance 	= new githubApi({
		token: 		options.token,
		auth: 		"oauth"
	});
	this.user 		= this.instance.getUser();
	
	callback(this);
}
github.prototype.repositories = function(callback) {
	this.user.repos(function(err, repos) {
		if (err) {
			callback(false);
		} else {
			callback(repos);
		}
	});
}
github.prototype.orgs = function(callback) {
	this.user.orgs(function(err, orgs) {
		if (err) {
			callback(false);
		} else {
			callback(orgs);
		}
	});
}
github.prototype.gists = function(callback) {
	this.user.orgs(function(err, gists) {
		if (err) {
			callback(false);
		} else {
			callback(gists);
		}
	});
}


module.exports = github;